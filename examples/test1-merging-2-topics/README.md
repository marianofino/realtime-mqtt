## Example: Merging 2 topics into 1 using IRTA function

### Overview

In this example we will use a feature of IRTA which consists on merging, at broker level, two incoming messages and transforming them into one single message by applying a custom function to them.

In this case, we will calculate the application rate in mm of a mobile irrigation system, based on two factors:
 * the the time it takes for the system to cover the whole field
 * the current flow of the pump.

Thus, the IRTA function receives 2 inputs:
  * the pump flow in m3 with topic *pumpFlow*
  * the time it takes to cover the field in hours with topic *time*. this time could also be speed data of the machine, but for the sake of simplicity, we just put time

There is a third parameter needed which is the surface of the field, but this is fixed, so we put it as a constant at the beginning of the code

With this data, it calculates the application rate and publishes it with the opic *applicationRate*.

#### Formula for application rate:

`pumpFlow` in m3
`time` in hours
`surface` in hectares
`appilcationRate` in mm

`applicationRate = ( ( pumpFlow / 10 ) * time ) / surface`

### Instructions

1. On the root folder, run:

```
$ npm rebuild
```

2. Go to examples/test1-merging-2-topics

3. Open a terminal and run the broker:

```
$ node broker.js
```

4. Open another terminal and run the subscriber:

```
$ node subscriber.js
```

5. Open another terminal and run one publisher:

```
$ node sensor1_pumpFlow.js
```

6. Open another terminal and run the other publisher:

```
$ node sensor2_time.js
```

7. Every minute you should see at the subscriber terminal that the message generated by the broker is received.
